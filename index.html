<!DOCTYPE html>
<html>
	<head>
		<title>Data Graphs</title>
		<!-- Load css files from css folder -->
		<link rel='stylesheet' href='css/style.css' />
		<!-- <link rel='stylesheet' href='css/bootstrap.min.css' /> -->
		<!-- <link rel='stylesheet' href='css/font-awesome.min.css' /> -->

		<!-- Load c3.css -->
		<link href="css/c3.css" rel="stylesheet" type="text/css">

		<!-- Load d3.js and c3.js -->
		<script src="javascript/library/d3.v3.min.js" charset="utf-8"></script>
		<script src="javascript/library/c3.min.js"></script>

		<!-- Load papaparse.js -->
		<script src="javascript/library/papaparse.min.js"></script> 

		<!-- Load create-table.js and create-graph.js -->
		<script src="javascript/create-table.js"></script>
		<script src="javascript/create-graph.js"></script>
  	</head>

  	<body>
		<div style="height:auto; border-width:1px">
			<div style="width:50%; border-width:0px;">
				<fieldset class="li-border">
					<legend>File Upload</legend>
					<div class="divContainer">
						<label>
							<legend class="innerLegend">Data File</legend>
							<input type="file" accept=".csv" id="data_file" name="datafile" class="pointer fileSelect" />
							<button id="Upload_Data_File" class="pointer uploadButton" onclick=UploadFile(1);>Upload</button>
						</label>
						<label>
							<legend class="innerLegend">Data Log</legend>
							<input type="file" accept=".csv" id="data_log" name="datalog" class="pointer fileSelect" />
							<button id="Upload_Data_Log" class="pointer uploadButton" onclick=UploadFile(2);>Upload</button>
						</label>
						<span class="error_text" id="error_data_file"></span>
						<span class="error_text" id="error_data_log"></span>
					</div>
				</fieldset>
			</div>
			<div class = "pad-div"></div>
			<div class="tables">
				<fieldset class="li-border">
					<legend>Tables</legend>
					<div class="tab">
						<button class="tablinksT" onclick="CreateTable(event, 1)" id="data_table_button">Data Table</button>
						<button class="tablinksT" onclick="CreateTable(event, 2)" id="log_table_button">Log Table</button>
					</div>
					<div id="data_table" class="tabcontentT">
						<div class="scroller" id="data_table_scroller"></div>
					</div>
					<div id="log_table" class="tabcontentT">
						<div class="scroller" id="log_table_scroller"></div>
					</div>
				</fieldset>
				<div class = "pad-div"></div>
				<fieldset class="li-border">
					<legend>Charts</legend>
						<!-- https://www.geeksforgeeks.org/how-to-create-a-dropdown-list-with-array-values-using-javascript/ -->
						<div class="tab">
							<button class="tablinksG" id="data_graph_button" onclick="parseData(1, 1, event)">Data Graph</button>
							<button class="tablinksG" id="log_graph_button"  onclick="parseData(2, 1, event)">Log Graph</button> 
						</div>
						<div id="data_graph" class="tabcontentG">
							<select id="line1D" class="lineboxD"> </select>
							<select id="line2D" class="lineboxD"> </select>
							<select id="line3D" class="lineboxD"> </select>
							<button id="draw_data_graph" onclick="parseData(1, 2, event)">Graph</button>
							<div id="data_chart"></div>
						</div>
						<div id="log_graph" class="tabcontentG">
							<select id="line1L" class="lineboxL"> </select>
							<select id="line2L" class="lineboxL"> </select>
							<select id="line3L" class="lineboxL"> </select>
							<button id="draw_log_graph" onclick="parseData(2, 2, event)">Graph</button>
							<div id="log_chart"></div>
						</div> 
				</fieldset>
			</div>
			<div class = "pad-div"></div>
			<div class = "pad-div"></div>
			<div class = "pad-div"></div>
			<div class = "pad-div"></div>
			<div class = "pad-div"></div>
		</div>

		<script type="text/javascript">
			function doClick(type, func) {
				var button;
				if(func == 1) {
					// console.log("table tab clicked by script");
					button = type == 1 ? document.getElementById("data_table_button") : document.getElementById("log_table_button");
				}
				else {
					// console.log("graph tab clicked by script");
					button = type == 1 ? document.getElementById("data_graph_button") : document.getElementById("log_graph_button");
				}
				button.click();
				// console.log("button has finished clicking");
			}
		</script>
  	</body>
</html>